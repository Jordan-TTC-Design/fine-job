{"version":3,"sources":["webpack:///./src/views/admin/DashBoardAppliesList.vue?b2e3","webpack:///./src/views/admin/DashBoardAppliesList.vue","webpack:///./src/views/admin/DashBoardAppliesList.vue?4eba"],"names":["class","type","ref","newItem","applyListCategory","changeSideHeader","appliesListList","length","appliesListAllowList","applyJobs","item","id","selectItem","title","applies","temItem","src","user","options","personalImg","alt","name","nowJobName","education","workExp","tel","email","href","cvLink","target","components","NewProductModal","data","orders","pagination","products","FormData","jobCategory","jobsList","otherData","newOrder","modalName","pageNumber","tempImgUrl","methods","this","forEach","console","log","document","documentElement","scrollTop","dataName","addJobOrders","classifyOrder","array","undefined","pageAction","push","has_next","getOrder","getProductsData","pageNum","emitter","emit","url","$http","get","then","res","catch","error","temObj","post","success","deleteOrder","delete","classifyJob","description","Obj","getJobCategory","jobArray","Set","obj","add","classifyApplyJobsList","job","appliedJob","created","webData","mounted","render"],"mappings":"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","file":"js/chunk-bf76df4e.0fc454e8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DashBoardAppliesList.vue?vue&type=style&index=0&id=6ce919d6&lang=scss\"","<template>\n  <NewProductModal ref=\"newProductModal\" @new-item=\"newItem\"/>\n  <div class=\"admin__subHeader mb-6 box--shadow\">\n    <div class=\"container\">\n      <div class=\"admin__subNav\">\n        <li class=\"d-flex align-items-center\">\n          <h2 class=\"admin__subNav__title\">應徵管理</h2>\n        </li>\n        <li\n          class=\"admin__subNav__item\"\n          @click=\"changeSideHeader('apply-new')\"\n          :class=\"{ active: applyListCategory === 'apply-new' }\"\n        >\n          <p class=\"admin__subNav__txt me-1\">新應徵</p>\n          <p class=\"admin__subNav__txt\">{{ appliesListList.length }}</p>\n        </li>\n        <li class=\"admin__subNav__item\">\n          <p class=\"admin__subNav__txt me-1\">已同意應徵</p>\n          <p class=\"admin__subNav__txt\">{{ appliesListAllowList.length }}</p>\n        </li>\n      </div>\n    </div>\n  </div>\n  <div class=\"container position-relative\">\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <!-- 職位 -->\n        <ul class=\"admin-sideList list-group box--shadow\" v-if=\"applyListCategory === 'apply-new'\">\n          <li\n            class=\"list-group-item d-flex justify-content-between align-items-center bg-white p-3\"\n          >\n            <p class=\"subTxt\">全部發布中職位</p>\n            <button type=\"button\" class=\"btn\"><i class=\"bi bi-search\"></i></button>\n          </li>\n          <template v-for=\"item in applyJobs\" :key=\"item.id\">\n            <li\n              class=\"sideList__item list-group-item list-group-item-action\"\n              @click=\"selectItem(item.id)\"\n            >\n              <p class=\"sideList__item__title mb-1\">{{ item.title }}</p>\n              <p class=\"sideList__item__subTxt\">申請人數：{{ item.applies.length }}</p>\n            </li>\n          </template>\n        </ul>\n      </div>\n      <div class=\"col-8\">\n        <ul class=\"candidateList \">\n          <template v-for=\"item in temItem.applies\" :key=\"item.id\">\n            <li class=\"candidateList__person box--shadow\">\n              <div class=\"d-flex justify-content-between align-items-end\">\n                <div class=\"d-flex\">\n                  <img\n                    class=\"person__personalImg me-3\"\n                    :src=\"item.user.options.personalImg\"\n                    :alt=\"item.user.name+'個人求職照片'\"\n                  />\n                  <div>\n                    <p class=\"person__name\">{{ item.user.name }}</p>\n                    <p class=\"person__txt\">目前職位：{{ item.user.options.nowJobName }}</p>\n                    <p class=\"person__txt\">學歷：{{ item.user.options.education ||'大學' }} </p>\n                    <p class=\"person__txt\">工作經驗：{{ item.user.options.workExp ||'無工作經驗'}} </p>\n                    <p class=\"person__txt\">聯絡電話：{{ item.user.tel }}</p>\n                    <p class=\"person__txt\">聯絡Email：{{ item.user.email }}</p>\n                  </div>\n                </div>\n                <a\n                  type=\"button\"\n                  class=\"btn btn-outline-primary  text-decoration-underline\"\n                  :href=\"item.user.options.cvLink\"\n                  target=\"_blank\"\n                  >打開履歷</a\n                >\n              </div>\n            </li>\n          </template>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/emitter';\nimport webData from '@/methods/webData';\nimport NewProductModal from '@/components/admin/DashBoardNewProductModal.vue';\n\nexport default {\n  components: {\n    NewProductModal,\n  },\n  data() {\n    return {\n      orders: [],\n      pagination: {},\n      products: [],\n      FormData: {},\n      jobCategory: [],\n      applyListCategory: 'apply-new',\n      appliesListList: [],\n      jobsList: [],\n      applyJobs: [],\n      appliesListAllowList: [],\n      temItem: {\n        title: '',\n        id: '',\n        applies: [],\n        otherData: {},\n      },\n      newOrder: {},\n      modalName: '',\n      pageNumber: 1,\n      tempImgUrl:\n        'https://images.unsplash.com/photo-1622495506073-56b1152a010c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=967&q=80Í',\n    };\n  },\n  methods: {\n    selectItem(id) {\n      if (this.applyListCategory === 'apply-new') {\n        this.applyJobs.forEach((item) => {\n          if (item.id === id) {\n            this.temItem = item;\n          }\n        });\n      }\n      console.log(this.temItem);\n      document.documentElement.scrollTop = 0;\n    },\n    changeSideHeader(dataName) {\n      this.applyListCategory = dataName;\n      if (this.applyListCategory === 'apply-new') {\n        this.selectItem(this.addJobOrders[0].id);\n      }\n    },\n    classifyOrder() {\n      const array = this.orders;\n      array.forEach((item) => {\n        if (item.user.options.pageAction !== undefined) {\n          if (item.user.options.pageAction === 'apply-job') {\n            this.appliesListList.push(item);\n          }\n        }\n      });\n      if (this.pagination.has_next) {\n        this.pageNumber += 1;\n        this.getOrder(this.pageNumber);\n      } else {\n        this.getProductsData();\n      }\n    },\n    getOrder(pageNum = 1) {\n      emitter.emit('spinner-open');\n      this.pageNumber = pageNum;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${pageNum}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          emitter.emit('spinner-close');\n          this.orders = res.data.orders;\n          this.pagination = res.data.pagination;\n          this.classifyOrder();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    newItem(temObj) {\n      emitter.emit('spinner-open');\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\n      this.$http\n        .post(url, temObj)\n        .then((res) => {\n          console.log(res.data);\n          if (res.data.success) {\n            // this.deleteOrder(this.temItem[0]);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      emitter.emit('spinner-close');\n    },\n    deleteOrder(id) {\n      emitter.emit('spinner-open');\n      // const { id } = this.temItem[0];\n      console.log(id);\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${id}`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          console.log(res);\n          this.getOrder();\n          emitter.emit('spinner-close');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    getProductsData() {\n      emitter.emit('spinner-open');\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          emitter.emit('spinner-close');\n          this.classifyJob();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    classifyJob() {\n      this.products.forEach((item) => {\n        if (item.description === '職位') {\n          const Obj = item;\n          this.jobsList.push(Obj);\n        }\n      });\n      this.getJobCategory();\n    },\n    getJobCategory() {\n      const jobArray = new Set();\n      this.jobsList.forEach((item) => {\n        const obj = {\n          title: item.title,\n          id: item.id,\n          applies: [],\n          otherData: item,\n        };\n        jobArray.add(obj);\n      });\n      this.jobCategory = jobArray;\n      this.classifyApplyJobsList();\n    },\n    classifyApplyJobsList() {\n      this.appliesListList.forEach((item) => {\n        this.jobCategory.forEach((job) => {\n          if (job.id === item.user.options.appliedJob) {\n            job.applies.push(item);\n          }\n        });\n      });\n      this.jobCategory.forEach((item) => {\n        if (item.applies.length > 0) {\n          this.applyJobs.push(item);\n        }\n      });\n      [this.temItem] = this.applyJobs;\n    },\n  },\n  created() {\n    this.FormData = webData;\n  },\n  mounted() {\n    this.getOrder();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.listBox {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid #e2e2e2;\n  border-radius: 8px;\n  padding: 12px;\n  &__logo {\n    width: 160px;\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    margin-right: 12px;\n  }\n}\n</style>\n","import { render } from \"./DashBoardAppliesList.vue?vue&type=template&id=6ce919d6\"\nimport script from \"./DashBoardAppliesList.vue?vue&type=script&lang=js\"\nexport * from \"./DashBoardAppliesList.vue?vue&type=script&lang=js\"\n\nimport \"./DashBoardAppliesList.vue?vue&type=style&index=0&id=6ce919d6&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}