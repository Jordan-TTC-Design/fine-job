{"version":3,"sources":["webpack:///./src/views/front/Front.vue","webpack:///./src/components/front/Cart.vue","webpack:///./src/components/front/Cart.vue?affd","webpack:///./src/views/front/Front.vue?c31f"],"names":["class","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","to","aria-current","openCart","tabindex","aria-labelledby","aria-hidden","ref","data-bs-dismiss","scope","role","colspan","cartList","cart","key","product","title","qty","min","updateCart","price","deleteCartProduct","cartTotal","deleteCart","closeCart","data","modal","cartState","methods","getCart","url","this","$http","get","then","res","carts","final_total","catch","error","console","log","delete","message","item","product_id","put","hide","show","watch","length","emitter","emit","created","on","mounted","$refs","cartModal","render","components","Cart"],"mappings":"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","file":"js/chunk-2d0bd795.7bced5b8.js","sourcesContent":["<template>\n  <Cart></Cart>\n  <header class=\"bg-light\">\n    <div class=\"container\">\n      <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <div class=\"container-fluid\">\n          <router-link class=\"navbar-brand\" to=\"/\">Navbar</router-link>\n          <button\n            class=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarNav\"\n            aria-controls=\"navbarNav\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span class=\"navbar-toggler-icon\"></span>\n          </button>\n          <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul class=\"navbar-nav position-reative\">\n              <li class=\"nav-item\">\n                <router-link class=\"nav-link\" aria-current=\"page\" to=\"/\">首頁</router-link>\n              </li>\n              <li class=\"nav-item\">\n                <router-link class=\"nav-link\" to=\"/products-list\">全部產品</router-link>\n              </li>\n              <li class=\"nav-item\">\n                <router-link class=\"nav-link\" to=\"/apply-job\">申請職位</router-link>\n              </li>\n              <li class=\"nav-item\">\n                <router-link class=\"nav-link\" to=\"/add-company\">新建企業</router-link>\n              </li>\n              <li class=\"nav-item\">\n                <router-link class=\"nav-link\" to=\"/add-job\">新建職位</router-link>\n              </li>\n              <li class=\"position-absolute end-0\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  @click=\"openCart\"\n                >\n                  購物車\n                </button>\n                <!-- 直接使用@click=\"emitter.emit('open-cart')\" 好像不行 -->\n                <!-- <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  @click=\"emitter.emit('open-cart')\"\n                >\n                  購物車\n                </button> -->\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n    </div>\n  </header>\n  <!-- 有點不知道分區要不要寫在外元件 -->\n  <div class=\"main py-4\">\n    <router-view></router-view>\n  </div>\n</template>\n<script>\nimport Cart from '@/components/front/Cart.vue';\nimport emitter from '@/components/helpers/emitter';\n\nexport default {\n  components: {\n    Cart,\n  },\n  methods: {\n    openCart() {\n      emitter.emit('open-cart');\n    },\n  },\n  created() {\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"cartModal\"\n  >\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">購物車</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"cartbox\">\n            <table class=\"table table-striped\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">產品名稱</th>\n                  <th scope=\"col\">產品數量</th>\n                  <th scope=\"col\">產品價格</th>\n                  <th scope=\"col\">動作</th>\n                </tr>\n              </thead>\n              <tbody>\n                <template v-if=\"cartList\">\n                  <tr v-for=\"cart in cartList\" :key=\"cart.id\">\n                    <td>{{ cart.product.title }}</td>\n                    <td class=\"d-flex\">\n                      <input\n                        type=\"number\"\n                        class=\"form-control w-auto me-1\"\n                        v-model.number=\"cart.qty\"\n                        min=\"1\"\n                      /><button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary\"\n                        @click=\"updateCart(cart)\"\n                      >\n                        更新購物車\n                      </button>\n                    </td>\n                    <td>{{ cart.product.price * cart.qty }} 元</td>\n                    <td>\n                      <div class=\"btn-group\" role=\"group\">\n                        <button\n                          type=\"button\"\n                          class=\"btn btn-outline-primary\"\n                          @click=\"deleteCartProduct(cart.id)\"\n                        >\n                          移除\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                </template>\n                <template v-else>\n                  <tr>\n                    <td colspan=\"4\">目前購物車沒東西～</td>\n                  </tr>\n                </template>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td>總共 {{ cartTotal }} 元</td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-primary\" @click=\"deleteCart\">\n            清空購物車\n          </button>\n          <router-link\n            to=\"/cart-checkout\"\n            type=\"button\"\n            class=\"btn btn-outline-primary\"\n            @click=\"closeCart\"\n          >\n            結帳\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/components/helpers/emitter';\nimport { Modal } from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      modal: {},\n      cartList: [],\n      cartTotal: null,\n      cartState: false,\n    };\n  },\n  methods: {\n    getCart() {\n      // emitter.emit('spinner-open');\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          // console.log(res);\n          this.cartList = res.data.data.carts;\n          this.cartTotal = res.data.data.final_total;\n          // emitter.emit('spinner-close');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    deleteCartProduct(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          console.log(`${res.data.message}`);\n          this.getCart();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    deleteCart() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          console.log(`${res.data.message}`);\n          this.getCart();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    updateCart(item) {\n      const product = { data: { product_id: item.product.id, qty: item.qty } };\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.$http\n        .put(url, product)\n        .then((res) => {\n          console.log(`${res.data.message}`);\n          this.getCart();\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    closeCart() {\n      this.modal.hide();\n    },\n    openCart() {\n      this.modal.show();\n    },\n  },\n  watch: {\n    carts() {\n      if (this.carts.length > 0) {\n        this.cartState = true;\n      } else {\n        this.cartState = false;\n      }\n      console.log(this.cartState);\n      emitter.emit('sendCartState', this.cartState);\n    },\n  },\n  created() {\n    emitter.on('get-cart', () => {\n      this.getCart();\n    });\n    emitter.on('close-cart', () => {\n      this.closeCart();\n    });\n    emitter.on('open-cart', () => {\n      this.openCart();\n    });\n  },\n  mounted() {\n    this.getCart();\n    this.modal = new Modal(this.$refs.cartModal);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { render } from \"./Cart.vue?vue&type=template&id=612a8f40\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Front.vue?vue&type=template&id=482bf864\"\nimport script from \"./Front.vue?vue&type=script&lang=js\"\nexport * from \"./Front.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}